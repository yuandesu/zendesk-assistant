# Zendesk Assistant

Zendesk専用の2つの実用的なスクリプトツール集で、カスタマーサポート業務の効率を向上させます：
1. **ChatGPT多機能アシスタント** - インテリジェントなテキスト処理と検索
2. **チケット情報コピーツール** - ワンクリックでチケットフィールド情報をコピー

## 1. ChatGPT多機能アシスタント (zendesk-chatgpt-assistant.js)

### 機能概要

テキスト選択とキーボードショートカットにより、7つの異なるChatGPT支援機能を提供します。

### 機能一覧

#### CC - Confluence検索
- **操作方法**: テキストを選択 → Cキーを素早くダブルクリック
- **機能**: 顧客メッセージを技術的な質問形式に変換し、Confluence検索を自動で開く
- **使用場面**: 内部技術文書や解決策を検索する必要がある時

#### EE - 内部TEE質問フォーマット
- **操作方法**: テキストを選択 → Eキーを素早くダブルクリック
- **機能**: 顧客の問題をプロフェッショナルな内部エンジニア向け質問形式にフォーマット
- **使用場面**: 技術チームに複雑な技術的問題を質問する必要がある時
- **出力形式**:
  ```
  Question: [直接的で明確な質問]
  Background: [詳細な背景情報]
  Thank you for your help in advance!
  ```

#### DD - Datadog文書検索
- **操作方法**: テキストを選択 → Dキーを素早くダブルクリック
- **機能**: Datadog関連キーワードを抽出し、公式文書検索を自動で開く
- **使用場面**: 製品機能説明や技術文書を検索する時

#### ZZ - Zendeskチケット検索
- **操作方法**: テキストを選択 → Zキーを素早くダブルクリック
- **機能**: テキストタイプを知的に分析し、対応する検索を実行
  - エラーログ：エラーメッセージを直接検索
  - 一般的な問題：キーワードを抽出して検索
- **使用場面**: 類似の過去のチケットや解決策を検索する時

#### GG - Google Cloud Search検索
- **操作方法**: テキストを選択 → Gキーを素早くダブルクリック
- **機能**: テキストタイプを知的に分析し、対応する検索を実行
  - エラーログ：エラーメッセージを直接検索
  - 一般的な問題：キーワードを抽出して検索
- **使用場面**: 企業内部文書や資料を検索する必要がある時

#### JJ - 日本語テキスト改善
- **操作方法**: 日本語テキストを選択 → Jキーを素早くダブルクリック
- **機能**: 3つの異なるスタイルの日本語改善版を提供
  - 標準改善版：一般的な標準表現
  - 丁寧な正式版：敬語を使用した正式な表現
  - 簡潔明確版：簡潔性を重視した表現
- **使用場面**: 顧客への日本語返信を作成する時

#### TT - テキスト翻訳
- **操作方法**: テキストを選択 → Tキーを素早くダブルクリック
- **機能**: 自動言語検出と翻訳
  - 日本語 → 英語
  - 英語 → 日本語
  - その他の言語 → 英語
- **使用場面**: 多言語カスタマーサポートを処理する時

### インストールと設定

#### 前提条件
- Tampermonkeyブラウザ拡張機能のインストール
- 有効なOpenAI APIキーの保有

#### 設定手順
1. ブラウザにTampermonkeyをインストール
2. `zendesk-chatgpt-assistant.js`ファイルを開く
3. **重要**: APIキーを設定：
   ```javascript
   const CONFIG = {
       api: {
           key: "sk-proj-xxxxxxxxxx", // ここに実際のOpenAI APIキーを入力
           model: "gpt-4",
           timeout: 30000
       }
   }
   ```
4. Tampermonkeyでスクリプトを有効化

#### APIキー取得方法
1. [OpenAI Platform](https://platform.openai.com/)にログイン
2. API Keys部分に移動
3. "Create new secret key"をクリック
4. 生成されたキーをコピーして設定に貼り付け

### 使用方法

#### 基本操作フロー
1. Zendeskページでテキストを選択
2. 対応する機能キーを素早くダブルクリック
3. 処理状態インジケータを確認

#### 状態インジケータ
選択したテキストの横に処理状態が表示されます：
- **処理中...** (オレンジ色)
- **完了** (緑色)
- **コピー済み** (青色)
- **エラー** (赤色)

#### キーボードサポート特性
- 任意のキーボード配置をサポート
- 物理キー位置を検出（文字出力に依存しない）
- 日本語キーボードとIMEをサポート

## 2. チケット情報コピーツール (copy-info.js)

### 機能概要

Zendeskチケットページにドラッグ可能なコピーボタンを追加し、ワンクリックで完全なチケット情報を収集・コピーします。

### 主要機能

#### 自動情報収集
以下のチケットフィールドを自動抽出：
- **要求者 (Requester)**
- **担当者 (Assignee)**
- **CC受信者 (CCs)**
- **チケットタイプ (Ticket Type)**
- **主要製品コンポーネント (Primary Product Component)**
- **関連製品コンポーネント (Related Product Components)**
- **影響度 (Impact)**
- **Datadog組織ID (Datadog Org ID)**
- **要求言語 (Language Requested)**
- **ティア (Tier)**
- **ユーザー地域 (User Region)**
- **チケットURL**

#### UI特性
- **ドラッグ可能ボタン**: 紫色のボタン、適切な位置に自由にドラッグ可能
- **ホバー効果**: マウスホバー時の色変化とボーダー効果
- **固定位置**: デフォルト位置はページ右下角
- **高階層表示**: ボタンが他の要素に隠れないことを保証

### 使用場面

#### 分割チケット（Split Ticket）フロー
元のチケットから新しいチケットを分割する必要がある時：
1. 元のチケットページで「Copy Ticket Info」ボタンをクリック
2. システムが関連情報を自動収集
3. フォーマットされた情報がクリップボードに自動コピー
4. 新しいチケットに貼り付け、分割元の記録として使用

#### 出力フォーマット例
```
Split from original ticket:
- Requester: customer@example.com
- Assignee: agent@datadog.com
- CCs: manager@example.com, tech@example.com
- Ticket Type: Technical Issue
- Primary Product Component: APM
- Related Product Components: Logs, Infrastructure
- Impact: High
- Datadog Org ID: 12345
- Language Requested: English
- Tier: Enterprise
- User Region: US East
- Ticket URL: https://datadog.zendesk.com/agent/tickets/123456
```

### インストール方法

1. Tampermonkeyブラウザ拡張機能をインストール
2. `copy-info.js`をTampermonkeyに追加
3. スクリプトが`https://datadog.zendesk.com/agent/tickets/*`ドメインで実行されることを確認
4. スクリプトがチケットページに自動でコピーボタンを追加

### 技術特性

#### SPA互換性
- 単一ページアプリケーション（SPA）アーキテクチャをサポート
- ページ変更を自動検出し再初期化
- 動的に読み込まれるコンテンツをサポート

#### データ抽出安定性
- 複数選択子戦略でデータ抽出成功を保証
- 異なるUI状態を知的に処理
- Zendeskインターフェース更新に自動適応

## トラブルシューティング

### ChatGPTアシスタントよくある問題

**問題**: キーボードショートカットが反応しない
- テキストが選択されているか確認
- 修飾キー（Ctrl/Cmd/Alt）が押されていないか確認
- 物理キーのダブルクリックであることを確認（文字入力ではない）

**問題**: APIエラー
- OpenAI APIキーが正しく設定されているか確認
- APIクォータが十分か確認
- ネットワーク接続を確認

**問題**: 日本語改善機能で3つのバリエーションが表示されない
- ChatGPT応答フォーマットを確認
- より長いテキストで試行
- API応答の安定性を確認

### コピーツールよくある問題

**問題**: コピーボタンが表示されない
- 正しいZendeskチケットページにいるか確認
- ページを更新して再試行
- ブラウザコンソールエラーメッセージを確認

**問題**: 一部フィールド情報が欠落
- チケットページが完全に読み込まれているか確認
- フィールドにデータがあるか確認
- すべての要素が見えるようにページをスクロール

## ブラウザサポート

- Chrome（推奨）
- Firefox
- Safari
- Edge

## セキュリティ注意事項

- APIキーはローカルにのみ保存
- HTTPS通信のみ使用
- 外部データ送信はOpenAI APIのみに制限
- 公開リポジトリにAPIキーを含めないでください
